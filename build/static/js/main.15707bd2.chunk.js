(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{164:function(t,e,a){t.exports=a(321)},169:function(t,e,a){},170:function(t,e,a){t.exports=a.p+"static/media/logo.5d5d9eef.svg"},171:function(t,e,a){},321:function(t,e,a){"use strict";a.r(e);var n=a(0),r=a.n(n),c=a(26),i=a.n(c),o=(a(169),a(9)),l=a(10),s=a(12),u=a(11),d=a(13),p=(a(170),a(171),a(39)),h=a(14),f=a.n(h),m=a(22),g=(a(78),function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).handleSubmitSong=function(){var t=Object(m.a)(f.a.mark(function t(e){var n,r,c,i;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,n=a.state.songQuery,r=encodeURIComponent(n),t.next=6,fetch("/api/search?query=".concat(r));case 6:return c=t.sent,t.next=9,c.json();case 9:i=t.sent,a.setState({songQuery:"",tracks:i,selected:{},probs:[]}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),a.setState({message:"error"}),console.log(t.t0.message);case 17:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}(),a.handleChange=function(t){a.setState(Object(p.a)({},t.target.name,t.target.value))},a.handleClick=function(){var t=Object(m.a)(f.a.mark(function t(e,n){var r,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/data?uri=".concat(e));case 2:return r=t.sent,t.next=5,r.json();case 5:c=t.sent,a.setState({message:c.message,tracks:[],selected:n,probs:c.probs,trackInfo:c.track_info});case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),a.state={songQuery:"",tracks:[],probs:[]},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"center-all"},r.a.createElement(v,Object.assign({},this.state,{handleChange:this.handleChange,handleSubmitSong:this.handleSubmitSong})),r.a.createElement("div",{id:"profile-container"},this.state.tracks.map(function(e){return r.a.createElement(y,Object.assign({key:e.uri},e,{handleClick:t.handleClick}))})),this.state.probs.length?r.a.createElement(Q,{data:this.state.probs,track:this.state.selected}):r.a.createElement("div",null))}}]),e}(n.Component));function v(t){return r.a.createElement("form",{onSubmit:t.handleSubmitSong},r.a.createElement("label",null,"Search for a song"),r.a.createElement("br",null),r.a.createElement("input",{name:"songQuery",value:t.songQuery,onChange:t.handleChange,style:{marginBottom:"40px"}}),r.a.createElement("button",{type:"submit",value:"Submit",className:"btn btn-dark"},"Submit"))}function y(t){var e=t.uri,a=t.name,n=t.artists[0].name,c=t.album.images[0].url;return a.length>17&&(a=a.slice(0,17)+"..."),n.length>17&&(n=n.slice(0,17)+"..."),r.a.createElement("div",{className:"artist-profile",onClick:function(){return t.handleClick(e,{name:a,artists:[{name:n}],album:{images:[{url:c}]}})}},r.a.createElement("img",{className:"artist-img",src:c}),r.a.createElement("div",{className:"artist-container"},r.a.createElement("div",null,a),r.a.createElement("div",{className:"artist-name"},n)))}var x=a(47),b=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("header",{id:"navbar"},r.a.createElement(x.b,{className:"link",to:"/"},"Home"),r.a.createElement(x.b,{className:"link",to:"/classification"},"Classification"),r.a.createElement(x.b,{className:"link",to:"/pitchfork"},"NLP Pitchfork"))}}]),e}(n.Component);function E(){return r.a.createElement("div",{className:"center-all"},r.a.createElement("h3",{id:"central-thesis"},"CENTRAL THESIS"),r.a.createElement("div",{id:"equation"},r.a.createElement("div",{className:"equation-profile"},r.a.createElement("img",{src:"https://openclipart.org/download/288546/magnifying-glass.svg",style:{width:100,height:100}}),r.a.createElement("label",null,"Exploration")),r.a.createElement("img",{className:"plus",src:"https://ya-webdesign.com/images/white-plus-icon-png-5.png",style:{width:120,height:100}}),r.a.createElement("div",{className:"equation-profile"},r.a.createElement("img",{src:"/pitchfork-svgrepo-com.svg",style:{width:100,height:100}}),r.a.createElement("label",null,"PitchFork")),r.a.createElement("img",{className:"plus",src:"http://knwsa.com/agri/soil-health-infographic/svg/minus.svg",style:{width:100,height:100}}),r.a.createElement("div",{className:"equation-profile"},r.a.createElement("img",{src:"https://upload.wikimedia.org/wikipedia/commons/6/60/Sleep.svg",style:{width:100,height:100}}),r.a.createElement("label",null,"Sleep")),r.a.createElement("div",null,r.a.createElement("img",{src:"http://www.cliparthut.com/clip-arts/76/gray-equal-sign-2-icon-free-gray-math-icons-clipart-pj0Wrd.png",style:{width:100,height:50}})),r.a.createElement("div",{style:{fontSize:40}},"How Reviews are Constructed",r.a.createElement("span",{style:{fontWeight:"bold"}},"/")," Recommender")))}var w=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,"Home Page")}}]),e}(n.Component),k=a(34),j=a(28),O=a(2),S=a(74),C=[{genre:"classical",value:0},{genre:"jazz",value:0},{genre:"reggae",value:0},{genre:"rap",value:0},{genre:"rock",value:0},{genre:"dance",value:0}],A=["classical","jazz","reggae","rap","rock","dance"],z=[{value:"classical",label:"Classical"},{value:"jazz",label:"Jazz"},{value:"reggae",label:"Reggae"},{value:"rap",label:"Rap"},{value:"rock",label:"Rock"},{value:"dance",label:"Dance"}],I=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).state={data:[],select:"classical",d3:{},precision:{}},a.handleChange=function(t){a.setState({select:t.value})},a.updateBarChart=function(){var t,e=a.state.d3Info,n=e.xScale,r=e.yScale,c=e.continentColor,i=e.recallLabel,o=e.precisionLabel,l=e.g,s=e.height,u=e.valuesGroup,d=a.state.select,p=a.state.data[d],h=a.cleanData(p,d),f=l.selectAll("rect").data(h),m=u.selectAll("text").data(h);f.exit().attr("class","exit").remove(),f.enter().append("rect").attr("class","enter").attr("fill",function(t){return c(t.genre)}).merge(f).transition().duration(720).attr("x",function(t){return n(t.genre)}).attr("y",function(t){return r(t.value)}).attr("width",function(t){return n.bandwidth()}).attr("height",function(t){return s-r(t.value)}),m.exit().attr("class","exit").remove(),m.enter().attr("fill","white").attr("class","value").append("text").merge(m).transition().duration(720).attr("x",function(t){return n(t.genre)+n.bandwidth()/2}).attr("y",function(t){return r(t.value)-10}).text(function(t){return Math.round(100*t.value)/100}),h.forEach(function(e){e.genre===d&&(t=e.value)}),t=(Math.round(100*t)/100).toString();var g=(Math.round(100*a.state.precision[d])/100).toString();t.length<4&&(t+="0"),g.length<4&&(g+="0"),i.text("Recall: ".concat(t)),o.text("Precision: ".concat(g))},a.createBarChart=a.createBarChart.bind(Object(j.a)(Object(j.a)(a))),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this.props.data,e=this.createBarChart(),a=this.props.precision;this.setState({data:t,d3Info:e,precision:a})}},{key:"componentDidUpdate",value:function(){this.updateBarChart()}},{key:"cleanData",value:function(t,e){for(var a=[],n=0,r=0;r<A.length;r++)t[A[r]]?(n+=t[A[r]],a.push({value:t[A[r]],genre:A[r]})):a.push({value:0,genre:A[r]});for(var c=0;c<a.length;c++)a[c].genre===e&&(a[c].value=1-n);return a}},{key:"createBarChart",value:function(){this.state.select;var t=this.node,e=80,a=20,n=50,r=100,c=1e3-e-a,i=600-n-r,o=O.l(t).append("svg").attr("width",c+e+a).attr("height",i+n+r).append("g").attr("transform","translate(".concat(e,",").concat(n,")")),l=O.h().domain(A).range([0,c]).padding(.2),s=O.i().domain([0,1]).range([i,0]),u=O.j(O.k),d=o.append("g").attr("class","x axis").style("font-size","14").attr("transform","translate(0, ".concat(i,")")),p=o.append("g").attr("class","y axis").style("font-size","14"),h=O.a(l).tickFormat(function(t){return t});d.call(h);var f=O.b(s);p.call(f),o.append("text").attr("x",c/2).attr("y",i+50).attr("text-anchor","middle").attr("fill","grey").text("Genre"),o.append("text").attr("x",-i/2).attr("y",-60).attr("text-anchor","middle").attr("transform","rotate(-90)").attr("fill","grey").text("Predicted Percentage");var m=o.append("text").attr("text-anchor","end").attr("x",c).attr("y",0).attr("text-anchor","end").attr("fill","grey").text("Precision: ".concat(0)),g=o.append("text").attr("text-anchor","start").attr("x",c).attr("y",25).attr("text-anchor","end").attr("fill","grey").text("Recall: ".concat(0));o.append("text").attr("x",c/2).attr("y",0-n/2).attr("text-anchor","middle").attr("fill","grey").style("text-decoration","underline").text("Predictions for a Certain Genre"),o.selectAll("rect").data(C).enter().append("rect").attr("class","enter").attr("fill",function(t){return u(t.genre)}).attr("x",function(t){return l(t.genre)}).attr("y",function(t){return s(0)}).attr("width",function(t){return l.bandwidth()}).attr("height",function(t){return i-s(0)}).on("mouseover",function(t){O.l(this).transition().attr("width",10+l.bandwidth()).attr("x",l(t.genre)-5),o.append("line").attr("x1",l(t.genre)).attr("y1",s(t.value)+1).attr("x2",l(t.genre)).attr("y2",s(t.value)+1).attr("stroke","white").attr("id","limit").style("stroke-dasharray","1%").transition().attr("x1",0).attr("x2",c)}).on("mouseout",function(t){O.l(this).transition().attr("width",l.bandwidth()).attr("x",l(t.genre)),O.l("#limit").remove()});var v=o.append("g");return v.selectAll("text").data(C).enter().append("text").attr("text-anchor","middle").attr("class","value").attr("x",function(t){return l(t.genre)+l.bandwidth()/2}).attr("y",function(t){return s(t.value)+10}).attr("fill","white").text(function(t){return t.value}),{xScale:l,yScale:s,continentColor:u,recallLabel:g,precisionLabel:m,g:o,height:i,valuesGroup:v}}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"chart"},r.a.createElement("div",{style:{color:"black",marginBottom:"20px"}},r.a.createElement(S.a,{options:z,onChange:this.handleChange,defaultValue:{value:"classical",label:"Classical"},theme:function(t){return Object(k.a)({},t,{colors:Object(k.a)({},t.colors,{primary25:"rgba(40, 44, 52, 0.25)",primary75:"rgba(40, 44, 52, 0.75)",primary50:"rgba(40, 44, 52, 0.50)",primary:"rgba(40, 44, 52, 0.5)"})})}})),r.a.createElement("div",{ref:function(e){return t.node=e}}))}}]),e}(n.Component),T=a(73),D=["classical","jazz","reggae","rap","rock","dance"],N=["danceability","energy","acousticness","speechiness","valence","loudness","instrumentalness","tempo","end_of_fade_in","start_of_fade_out","tempo_confidence","liveness","time_signature_confidence","time_signature"],P=["Danceability","Energy","Acousticness","Speechiness","Valence","Loudness","Instrumentalness","Tempo","End of Fade In","Start of Fade Out","Tempo Confidence","Liveness","Time Signature Confidence","Time Signature"];function B(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}var G=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={data:{},select:"danceability"},a.handleChange=function(t){a.setState({select:t.value})},a.cleanData=function(t,e){for(var a=Object.keys(t),n={},r=0;r<a.length;r++){var c=a[r],i=t[c].y,o=t[c].x,l=[{x:0,y:0}];"loudness"===e&&(l=[]);for(var s=0;s<i.length;s++){var u={};u.y=i[s],u.x=o[s],l.push(u)}var d=l.map(function(t){return t.x});l.push({x:Math.max.apply(Math,Object(T.a)(d))+.05,y:0}),n[a[r]]=l}return n},a.createLineChart=function(){var t=a.state.select,e=a.node,n=O.n().duration(200),r=80,c=20,i=50,o=100,l=1e3-r-c,s=600-i-o,u=O.l(e).append("svg").attr("width",l+r+c).attr("height",s+i+o).append("g").attr("transform","translate(".concat(r,",").concat(i,")")),d=O.i().range([0,l]);d.domain([0,1]);var p=O.i().range([s,0]);p.domain([0,1]);var h=O.j(O.k),f=u.append("g").attr("class","x axis").attr("transform","translate(0, ".concat(s,")")).style("font-size","14"),m=u.append("g").attr("class","y axis").style("font-size","14"),g=O.a(d).tickFormat(function(t){return t});f.call(g);var v=O.b(p);m.call(v);var y=u.append("text").attr("x",l/2).attr("y",s+50).attr("text-anchor","middle").attr("fill","grey").text(t);u.append("text").attr("x",-s/2).attr("y",-60).attr("text-anchor","middle").attr("transform","rotate(-90)").attr("fill","grey").text("Percentage");u.append("text").attr("x",l/2).attr("y",0-i/2).attr("text-anchor","middle").attr("fill","grey").style("text-decoration","underline").text("Distribution for Genres");var x=O.e().x(function(t){return d(t.x)}).y(function(t){return p(t.y)}).curve(O.c);D.forEach(function(t){u.append("path").datum({x:[0,1],y:[0,1]}).attr("fill",function(){var e=B(h(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.5)")}).attr("stroke",function(){var e=B(h(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.8)")}).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("stroke-width",1.5).attr("d",x).attr("id","line-".concat(t)).attr("class","genre-line").on("mouseover",function(e){O.l(this).attr("stroke",function(){var e=B(h(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 1)")})}).on("mouseout",function(e){O.l(this).attr("stroke",function(){var e=B(h(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.5)")})}).on("click",function(t){var e=this.id.replace("line-","");D.forEach(function(t){if(t!==e){var a=O.m("#line-".concat(t)),r=O.e().x(function(t){return d(t.x)}).y(function(t){return p(t.y)}).curve(O.c);a.datum(function(t){var e=l/t.length,a=[];return t.forEach(function(t,n){a.push({x:d(e*n),y:0})}),a}).transition(n).duration(750).attr("d",r)}})})});var b=u.append("g").attr("class","legend").attr("height",100).attr("width",100);return b.selectAll("rect").data(D).enter().append("rect").attr("x",l-35).attr("y",function(t,e){return 25+10*e}).attr("width",5).attr("height",5).style("fill",function(t){return h(t)}),b.selectAll("text").data(D).enter().append("text").attr("fill","rgba(255,255,255,0.5)").attr("text-anchor","start").attr("x",l-25).style("font-size",12).attr("id",function(t){return"legend-".concat(t)}).attr("y",function(t,e){return 30+10*e}).text(function(t){return t}).on("mouseover",function(t){O.l(this).attr("fill","rgba(255,255,255,1)"),O.l("#line-".concat(t)).attr("stroke",function(){var e=B(h(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 1)")}).attr("fill",function(){var e=B(h(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.8)")}).style("stroke-width",5)}).on("mouseout",function(t){O.l(this).attr("fill","rgba(255,255,255,0.5)"),O.l("#line-".concat(t)).attr("stroke",function(){var e=B(h(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.8)")}).attr("fill",function(){var e=B(h(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.5)")}).style("stroke-width",1.5)}),{xScale:d,yScale:p,continentColor:h,t:n,g:u,height:s,xAxisGroup:f,yAxisGroup:m,xLabel:y}},a.updateLineChart=function(){for(var t=a.state.d3Info,e=t.xScale,n=t.yScale,r=t.g,c=t.xAxisGroup,i=t.yAxisGroup,o=t.continentColor,l=t.xLabel,s=a.state,u=s.select,d=s.data[u],p=a.cleanData(d,u),h=[],f=[],m=Object.keys(d),g=0;g<m.length;g++)h=h.concat(d[m[g]].x),f=f.concat(d[m[g]].y);e.domain(O.d(h,function(t){return t})),n.domain(O.d(f,function(t){return t}));var v=O.a(e).tickFormat(function(t){return t}),y=O.b(n).tickFormat(function(t){return t});i.transition(b).duration(750).call(y),c.transition(b).duration(750).call(v);var x=O.e().x(function(t){return e(t.x)}).y(function(t){return n(t.y)}).curve(O.c);l.text(u);var b=O.n().duration(200);Object.keys(p).forEach(function(t){r.select("#line-".concat(t)).datum(p[t]).attr("fill",function(){var e=B(o(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.5)")}).attr("stroke",function(){var e=B(o(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.8)")}).attr("stroke-linejoin","round").attr("stroke-linecap","round").on("mouseover",function(e){O.l("#legend-".concat(t)).attr("fill","rgba(255,255,255,1)"),O.l(this).attr("stroke",function(){var e=B(o(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 1)")}).attr("fill",function(){var e=B(o(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.8)")}).style("stroke-width",5)}).on("mouseout",function(e){O.l("#legend-".concat(t)).attr("fill","rgba(255,255,255,0.5)"),O.l(this).attr("stroke",function(){var e=B(o(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.8)")}).attr("fill",function(){var e=B(o(t)),a=e.r,n=e.g,r=e.b;return"rgba(".concat(a,", ").concat(n,", ").concat(r,", 0.5)")}).style("stroke-width",1.5)}).transition(b).duration(750).attr("d",x)})},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this.createLineChart();this.setState({data:this.props.data,d3Info:t})}},{key:"componentDidUpdate",value:function(){this.updateLineChart()}},{key:"render",value:function(){var t=this,e=[];N.map(function(t,a){return e.push({value:t,label:P[a]})});return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"chart"},r.a.createElement("div",{style:{color:"black",marginBottom:"20px"}},r.a.createElement(S.a,{options:e,onChange:this.handleChange,defaultValue:{value:"danceability",label:"Danceability"},theme:function(t){return Object(k.a)({},t,{colors:Object(k.a)({},t.colors,{primary25:"rgba(40, 44, 52, 0.25)",primary75:"rgba(40, 44, 52, 0.75)",primary50:"rgba(40, 44, 52, 0.50)",primary:"rgba(40, 44, 52, 0.5)"})})}})),r.a.createElement("div",{ref:function(e){return t.node=e},style:{color:"white"}})))}}]),e}(n.Component),_={danceability:"Danceability",energy:"Energy",acousticness:"Acousticness",speechiness:"Speechiness",valence:"Valence",loudness:"Loudness",instrumentalness:"Instrumentalness",tempo:"Tempo",end_of_fade_in:"End of Fade-in",start_of_fade_out:"Start of Fade-out",tempo_confidence:"Tempo Confidence",liveness:"Liveness",time_signature_confidence:"Time Signature Confidence",time_signature:"Time Signature"},L=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).createBarChart=a.createBarChart.bind(Object(j.a)(Object(j.a)(a))),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){this.createBarChart(this.props.featureImportance)}},{key:"createBarChart",value:function(t){var e=t.sort(function(t,e){return t.importance-e.importance});e.forEach(function(t){t.importance=Math.round(100*t.importance)/100});var a=e.map(function(t){return t.feature}),n=e.map(function(t){return Math.round(100*t.importance)/100}),r=this.node,c=200,i=140,o=50,l=100,s=1200-c-i,u=600-o-l,d=O.l(r).append("svg").attr("width",s+c+i).attr("height",u+o+l).append("g").attr("transform","translate(".concat(c,",").concat(o,")")),p=O.h().domain(a).range([u,0]).padding(.2),h=O.i().domain([0,Math.max.apply(Math,Object(T.a)(n))+.01]).range([0,s]),f=O.j(O.k),m=d.append("g").attr("class","x axis").style("font-size","14").attr("transform","translate(0, ".concat(u,")")),g=d.append("g").attr("class","y axis").style("font-size","14"),v=O.a(h),y=O.b(p).tickFormat(function(t){return _[t]});g.call(y),d.append("text").attr("x",s/2).attr("y",u+50).attr("text-anchor","middle").attr("fill","grey").text("Relative Importance"),d.append("text").attr("x",-u/2).attr("y",-150).attr("text-anchor","middle").attr("transform","rotate(-90)").attr("fill","grey").text("Features"),d.append("text").attr("x",s/2).attr("y",0-o/2).attr("text-anchor","middle").attr("fill","grey").style("text-decoration","underline").text("Relative Feature Importance"),d.selectAll("rect").data(e).enter().append("rect").attr("class","enter").attr("fill",function(t){return f(t.feature)}).attr("x",function(t){return h(0)}).attr("y",function(t){return p(t.feature)}).attr("width",function(t){return h(t.importance)}).attr("height",function(t){return p.bandwidth()}),m.call(v),d.append("g").selectAll("text").data(e).enter().append("text").attr("text-anchor","middle").attr("class","value").attr("x",function(t){return h(t.importance)+32}).attr("y",function(t){return p(t.feature)+p.bandwidth()/2+7}).attr("fill","white").text(function(t){return 0===t.importance?"":Math.round(100*t.importance)/100})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"chart feature-importance"},r.a.createElement("div",{ref:function(e){return t.node=e}}))}}]),e}(n.Component);function M(){return r.a.createElement("div",{className:"center-all",id:"classification-content"},r.a.createElement("div",null,r.a.createElement("h1",null,"Classifing Music Genre"),r.a.createElement("p",null,"Music genre is fluid, dynamic and ever evolving. I wanted to see if it was possible to correctly classify music into predetermined genres based on a limited set of features.")),r.a.createElement("div",null,r.a.createElement("h3",null,"The Design"),r.a.createElement("p",null,"Pick six high-level genres to group songs. Then find a data source to provide a sufficiant amount of song data for each genre. Once the data has been aquired, train a random forest model. Then test the model on a hold out dataset to appropriately tune hyperparameters.")),r.a.createElement("div",null,r.a.createElement("h3",null,"The Data"),r.a.createElement("p",null,"The six geners chosen were classical, jazz, reggae, rap, rock, dance. Using Spotify's API, 1000 songs were obtained for each genre. These came from premade Spotify curated playlists. Spotify realeases many different features for songs that include Danceability, Valence, Tempo etc. These were then gathered and stored for the 6000 songs with genre labels.",r.a.createElement("br",null),r.a.createElement("br",null),"Below is a graph of the distrobutions for each feature across genres")))}function H(){return r.a.createElement("div",{className:"center-all"},r.a.createElement("div",null,r.a.createElement("h3",null,"Algorithm"),r.a.createElement("p",null,"The model used is random forest provided by sklearn. There were a 100 trees in the forest with no max depth as well as max features being the square of the number of features. The data was split into a 4:1 for test and train. This gave me the best accuracy score (there is no class inbalance and thus is a good metric to gauge...) Other algorithms tested were KNN and XGboost")),r.a.createElement("div",null,r.a.createElement("h3",null,"Results"),r.a.createElement("p",null,"I looked at accuracy, as well as precision and recall for all genres. The model did especially well with regards to Classical and Jazz music. Interestingly it would get confused with only jazz music when prediciting classical, however it was more broad when predicting jazz.",r.a.createElement("br",null),"Graphed bellow represent how the model predicted for each genre with the holdout test data.")))}function R(){return r.a.createElement("div",{className:"center-all"},r.a.createElement("p",null,"The models feature importance showed that Dancablility gave the most information to the model. In the histogram chart above one can notice the seporation of each genre. Energy gave the second most information to the model, however"),r.a.createElement("div",null,r.a.createElement("h3",null,"Results"),r.a.createElement("p",null,"I looked at accuracy, as well as precision and recall for all genres. The model did especially well with regards to Classical and Jazz music. Interestingly it would get confused with only jazz music when prediciting classical, however it was more broad when predicting jazz.",r.a.createElement("br",null),"Graphed bellow represent how the model predicted for each genre with the holdout test data.")))}function F(){return r.a.createElement("div",{className:"center-all"},r.a.createElement("p",null,"Using Spotify's API you can search any song you like to test my model. Remember in my model's world only six genres exist..."))}var U=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).handleSubmitSong=function(){var t=Object(m.a)(f.a.mark(function t(e){var n,r,c,i;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.preventDefault(),t.prev=1,n=a.state.songQuery,r=encodeURIComponent(n),t.next=6,fetch("/api/search?query=".concat(r));case 6:return c=t.sent,t.next=9,c.json();case 9:i=t.sent,a.setState({songQuery:"",tracks:i,selected:{},probs:[]}),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),a.setState({message:"error"}),console.log(t.t0.message);case 17:case"end":return t.stop()}},t,null,[[1,13]])}));return function(e){return t.apply(this,arguments)}}(),a.handleChange=function(t){a.setState(Object(p.a)({},t.target.name,t.target.value))},a.handleClick=function(){var t=Object(m.a)(f.a.mark(function t(e,n){var r,c;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/data?uri=".concat(e));case 2:return r=t.sent,t.next=5,r.json();case 5:c=t.sent,a.setState({message:c.message,tracks:[],selected:n,probs:c.probs,trackInfo:c.track_info});case 7:case"end":return t.stop()}},t)}));return function(e,a){return t.apply(this,arguments)}}(),a.state={songQuery:"",tracks:[],probs:[]},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"center-all",id:"search-form"},r.a.createElement(v,Object.assign({},this.state,{handleChange:this.handleChange,handleSubmitSong:this.handleSubmitSong})),r.a.createElement("div",{id:"profile-container"},this.state.tracks.map(function(e){return r.a.createElement(y,Object.assign({key:e.uri},e,{handleClick:t.handleClick}))})),this.state.probs.length?r.a.createElement(Q,{data:this.state.probs,track:this.state.selected}):r.a.createElement("div",null))}}]),e}(n.Component),q=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=Object(m.a)(f.a.mark(function t(){var e,a,n,r,c,i;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/classification");case 3:return e=t.sent,t.next=6,e.json();case 6:a=t.sent,n=a.featureImportance,r=a.histogram,c=a.precision,i=a.wrongPrediction,this.setState({featureImportance:n,histogram:r,precision:c,wrongPrediction:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{style:{paddingBottom:"100px"}},r.a.createElement(M,null),r.a.createElement("div",{className:"center-all charts"},this.state.histogram?r.a.createElement(G,{data:this.state.histogram}):r.a.createElement("div",null,"Loading")),r.a.createElement(H,null),r.a.createElement("div",{className:"center-all charts"},this.state.wrongPrediction?r.a.createElement(I,{data:this.state.wrongPrediction,precision:this.state.precision}):r.a.createElement("div",null,"Loading")),r.a.createElement(R,null),r.a.createElement("div",{className:"center-all charts"},this.state.featureImportance?r.a.createElement(L,{featureImportance:this.state.featureImportance}):r.a.createElement("div",null,"Loading")),r.a.createElement(F,null),r.a.createElement(U,null))}}]),e}(n.Component),J=["classical","dance","jazz","rap","reggae","rock"],Q=function(t){function e(t){var a;return Object(o.a)(this,e),(a=Object(s.a)(this,Object(u.a)(e).call(this,t))).createBarChart=a.createBarChart.bind(Object(j.a)(Object(j.a)(a))),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=Object(m.a)(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:try{this.createBarChart()}catch(e){console.error(e)}case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"createBarChart",value:function(){var t=this.props.track.name,e=this.props.track.artists[0].name,a=this.node,n=80,r=20,c=50,i=100,o=1e3-n-r,l=600-c-i,s=O.l(a).append("svg").attr("width",o+n+r).attr("height",l+c+i).append("g").attr("transform","translate(".concat(n,",").concat(c,")")),u=O.h().domain(J).range([0,o]).padding(.2),d=O.i().domain([0,1]).range([l,0]),p=O.j(O.k),h=s.append("g").attr("class","x axis").style("font-size","14").attr("transform","translate(0, ".concat(l,")")),f=s.append("g").attr("class","y axis").style("font-size","14"),m=O.a(u).tickFormat(function(t){return t});h.call(m);var g=O.b(d);f.call(g),s.append("text").attr("x",o/2).attr("y",l+50).attr("text-anchor","middle").attr("fill","grey").text("Genre"),s.append("text").attr("x",-l/2).attr("y",-60).attr("text-anchor","middle").attr("transform","rotate(-90)").attr("fill","grey").text("Predicted Percentage"),s.append("text").attr("x",o/2).attr("y",0-c/2).attr("text-anchor","middle").attr("fill","grey").style("text-decoration","underline").text("The Genre Probability for ".concat(t," by ").concat(e)),s.selectAll("rect").data(this.props.data).enter().append("rect").attr("class","enter").attr("fill",function(t){return p(t.genre)}).attr("x",function(t){return u(t.genre)}).attr("y",function(t){return d(0)}).attr("width",function(t){return u.bandwidth()}).attr("height",function(t){return l-d(0)}).on("mouseover",function(t){O.l(this).transition().attr("width",10+u.bandwidth()).attr("x",u(t.genre)-5),s.append("line").attr("x1",u(t.genre)).attr("y1",d(t.value)+1).attr("x2",u(t.genre)).attr("y2",d(t.value)+1).attr("stroke","white").attr("id","limit").style("stroke-dasharray","1%").transition().attr("x1",0).attr("x2",o)}).on("mouseout",function(t){O.l(this).transition().attr("width",u.bandwidth()).attr("x",u(t.genre)),O.l("#limit").remove()}).transition().duration(720).attr("x",function(t){return u(t.genre)}).attr("y",function(t){return d(t.value)}).attr("width",function(t){return u.bandwidth()}).attr("height",function(t){return l-d(t.value)}),s.append("g").selectAll("text").data(this.props.data).enter().append("text").attr("text-anchor","middle").attr("class","value").attr("x",function(t){return u(t.genre)+u.bandwidth()/2}).attr("y",function(t){return d(t.value)+10}).attr("fill","white").text(function(t){return t.value}).transition().duration(720).attr("x",function(t){return u(t.genre)+u.bandwidth()/2}).attr("y",function(t){return d(t.value)-10}).text(function(t){return Math.round(100*t.value)/100})}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"chart probs"},r.a.createElement("div",{ref:function(e){return t.node=e}}))}}]),e}(n.Component),W=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(V,null),r.a.createElement(Y,null),r.a.createElement(K,null))}}]),e}(n.Component),V=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={data:[]},a.createBars=function(t){var e=a.node,n=function(t){for(var e=[],a=Object.keys(t),n=0;n<a.length;n++){var r=t[a[n]];r.genre=a[n],e.push(r)}return e.forEach(function(t){var e=t["Opinion/Interpretation"];t.Sound+=e,e=t.Sound,t["History/Context"]+=e,e=t["History/Context"],t.Artist+=e}),e}(t);n.sort(function(t,e){return e["Opinion/Interpretation"]-t["Opinion/Interpretation"]});var r=["Artist","History/Context","Sound","Opinion/Interpretation"],c=n.map(function(t){return t.genre}),i=80,o=100,l=50,s=100,u=1e3-i-o,d=600-l-s,p=O.l(e).append("svg").attr("width",u+i+o).attr("height",d+l+s).append("g").attr("transform","translate(".concat(i,",").concat(l,")"));p.append("text").attr("x",u/2).attr("y",d+50).attr("text-anchor","middle").attr("fill","grey").text("Genre"),p.append("text").attr("x",-d/2).attr("y",-60).attr("text-anchor","middle").attr("transform","rotate(-90)").attr("fill","grey").text("Predicted Percentage"),p.append("text").attr("x",u/2).attr("y",0-l/2).attr("text-anchor","middle").attr("fill","grey").style("text-decoration","underline").text("Topics by Genre");var h=O.h().domain(c).range([0,u]).padding(.2),f=O.i().domain([0,1]).range([d,0]),m=O.j(O.k),g=p.append("g").attr("class","x axis").style("font-size","14").attr("transform","translate(0, ".concat(d,")")),v=p.append("g").attr("class","y axis").style("font-size","14"),y=O.a(h).tickFormat(function(t){return t});g.call(y);var x=O.b(f);v.call(x),r.forEach(function(t){p.append("g").selectAll("rect").data(n).enter().append("rect").attr("class","enter").attr("fill",function(e,a){return m(t)}).attr("x",function(t){return h(t.genre)}).attr("y",function(e){return f(e[t])}).attr("width",function(t){return h.bandwidth()}).attr("height",function(e){return d-f(e[t])}).on("mouseover",function(e){"History/Context"===t&&(t="History"),"Opinion/Interpretation"===t&&(t="Opinion"),O.l("#legend-".concat(t)).attr("fill","white")}).on("mouseout",function(e){O.l("#legend-".concat(t)).attr("fill","rgba(255,255,255,0.5)")})});var b=p.append("g").attr("class","legend-pitchfork").attr("height",100).attr("width",100);b.selectAll("rect").data(r).enter().append("rect").attr("x",u-10).attr("y",function(t,e){return 22+10*e}).attr("width",5).attr("height",8).style("fill",function(t){return m(t)}),b.selectAll("text").data(r).enter().append("text").attr("fill","rgba(255,255,255,0.5)").attr("text-anchor","start").attr("x",u-0).style("font-size",12).attr("id",function(t){return"History/Context"===t&&(t="History"),"Opinion/Interpretation"===t&&(t="Opinion"),"legend-".concat(t)}).attr("y",function(t,e){return 30+10*e}).text(function(t){return t})},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=Object(m.a)(f.a.mark(function t(){var e,a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/topicgenre");case 3:return e=t.sent,t.next=6,e.json();case 6:a=t.sent,this.setState({data:a}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.createBars(this.state.data)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"pitchfork-chart",ref:function(e){return t.node=e}})}}]),e}(n.Component),K=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={data:[],previousData:[],searchTerm:"kanyewest"},a.handleChange=function(t){a.setState(Object(p.a)({},t.target.name,t.target.value))},a.createScatterPlot=function(){var t=a.node,e=80,n=20,r=100,c=100,i=1e3-e-n,o=600-r-c,l=O.n().duration(2e3),s=O.l(t).append("svg").attr("width",i+e+n).attr("height",o+r+c).append("g").attr("transform","translate(".concat(e,",").concat(r,")"));s.append("text").attr("x",i/2).attr("y",0-r/2).attr("text-anchor","middle").attr("fill","grey").style("text-decoration","underline").text("Similar Words");var u=O.i().domain([0,1]).range([0,i]),d=O.i().domain([0,1]).range([o,0]),p=O.j(O.k),h=s.append("g").attr("class","x axis").style("font-size","14").attr("transform","translate(0, ".concat(o,")")),f=s.append("g").attr("class","y axis").style("font-size","14"),m=(O.a(u).tickFormat(function(t){return t}),O.b(d),s.append("g").selectAll("text").attr("class","labels"));return{xScale:u,yScale:d,continentColor:p,t:l,g:s,height:o,xAxisGroup:h,yAxisGroup:f,labels:m}},a.updateScatterPlot=function(t){var e=a.state.d3Stuff,n=e.g,r=e.t,c=e.xScale,i=e.yScale,o=(e.xAxisGroup,e.yAxisGroup,e.height),l=[],s=[],u=[];t.forEach(function(t){l.push(t.y),s.push(t.x),u.push(t.label)});var d=O.f(t,function(t){return t.x}),p=O.f(t,function(t){return t.y}),h=O.g(t,function(t){return t.x}),f=O.g(t,function(t){return t.y});d>200&&(s.splice(s.indexOf(d),1),t.splice(s.indexOf(d),1)),p>200&&(l.splice(l.indexOf(p),1),t.splice(l.indexOf(p),1)),h<-200&&(s.splice(s.indexOf(h),1),t.splice(s.indexOf(h),1)),f<-200&&(l.splice(l.indexOf(f),1),t.splice(l.indexOf(f),1)),c.domain(O.d(s,function(t){return t}));O.a(c);i.domain(O.d(l,function(t){return t}));O.b(i);var m=n.selectAll(".labels").data(t,function(t){return t.label});m.exit().transition(r).duration(2e3).attr("y",400+o).attr("class","exit").remove(),m.enter().append("text").on("click",function(t){a.setState({searchTerm:t.label})}).attr("class","labels").attr("text-anchor","middle").attr("x",function(t){return c(t.x)}).attr("y",function(t){return-200}).merge(m).transition(r).duration(2e3).attr("x",function(t){return c(t.x)}).attr("y",function(t){return i(t.y)}).attr("fill",function(t,e){return 0===e?"red":"white"}).text(function(t){return"z"===t.label?"jay-z":t.label})},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=Object(m.a)(f.a.mark(function t(){var e,a,n;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/word2vec?word=".concat(this.state.searchTerm));case 3:return e=t.sent,t.next=6,e.json();case 6:a=t.sent,n=this.createScatterPlot(),this.setState({data:a,d3Stuff:n}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[0,11]])}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var t=Object(m.a)(f.a.mark(function t(){var e,a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/word2vec?word=".concat(this.state.searchTerm));case 3:return e=t.sent,t.next=6,e.json();case 6:a=t.sent,this.updateScatterPlot(a),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return r.a.createElement("div",{style:{paddingTop:"30vh"}},r.a.createElement("select",{name:"searchTerm",onChange:this.handleChange},r.a.createElement("option",{value:"kanyewest"},"Kanye West"),r.a.createElement("option",{value:"soul"},"Soul"),r.a.createElement("option",{value:"metal"},"Metal"),r.a.createElement("option",{value:"jazz"},"Jazz"),r.a.createElement("option",{value:"blues"},"Blues"),r.a.createElement("option",{value:"drake"},"Drake"),r.a.createElement("option",{value:"ledzeppelin"},"Led Zeppelin"),r.a.createElement("option",{value:"arianagrande"},"Ariana Grande"),r.a.createElement("option",{value:"bobdylan"},"Bob Dylan"),r.a.createElement("option",{value:"grunge"},"Grunge"),r.a.createElement("option",{value:"johnnycash"},"Johnny Cash"),r.a.createElement("option",{value:"muramasa"},"Masa Mura"),r.a.createElement("option",{value:"amywinehouse"},"Amy Winehouse"),r.a.createElement("option",{value:"davidbowie"},"David Bowie"),r.a.createElement("option",{value:"brucespringsteen"},"Bruce Springsteen"),r.a.createElement("option",{value:"britpop"},"Brit Pop"),r.a.createElement("option",{value:"keane"},"Keane")),r.a.createElement("div",{className:"pitchfork-chart",ref:function(e){return t.node=e}}))}}]),e}(n.Component),Y=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={data:[]},a.createBars=function(t){var e=a.node,n=function(t){return t.forEach(function(t){var e=t["Opinion/Interpretation"];t.Sound+=e,e=t.Sound,t["History/Context"]+=e,e=t["History/Context"],t.Artist+=e}),t}(a.state.data),r=["Artist","History/Context","Sound","Opinion/Interpretation"],c=(n.map(function(t){return t.genre}),80),i=100,o=50,l=100,s=1e3-c-i,u=600-o-l,d=O.l(e).append("svg").attr("width",s+c+i).attr("height",u+o+l).append("g").attr("transform","translate(".concat(c,",").concat(o,")"));d.append("text").attr("x",s/2).attr("y",u+50).attr("text-anchor","middle").attr("fill","grey").text("Genre"),d.append("text").attr("x",-u/2).attr("y",-60).attr("text-anchor","middle").attr("transform","rotate(-90)").attr("fill","grey").text("Predicted Percentage"),d.append("text").attr("x",s/2).attr("y",0-o/2).attr("text-anchor","middle").attr("fill","grey").style("text-decoration","underline").text("How Topics with Exream Scores Differ");var p=a.state.data.map(function(t){return t.type}),h=O.h().domain(p).range([0,s]).padding(.2),f=O.i().domain([0,1]).range([u,0]),m=O.j(O.k),g=d.append("g").attr("class","x axis").style("font-size","14").attr("transform","translate(0, ".concat(u,")")),v=d.append("g").attr("class","y axis").style("font-size","14"),y=O.a(h).tickFormat(function(t){return t});g.call(y);var x=O.b(f);v.call(x),r.forEach(function(t){d.append("g").selectAll("rect").data(n).enter().append("rect").attr("class","enter").attr("fill",function(e,a){return m(t)}).attr("x",function(t){return h(t.type)}).attr("y",function(e){return f(e[t])}).attr("width",function(t){return h.bandwidth()}).attr("height",function(e){return u-f(e[t])}).on("mouseover",function(e){"History/Context"===t&&(t="History"),"Opinion/Interpretation"===t&&(t="Opinion"),O.l("#legend-".concat(t,"1")).attr("fill","white")}).on("mouseout",function(e){O.l("#legend-".concat(t,"1")).attr("fill","rgba(255,255,255,0.5)")})});var b=d.append("g").attr("class","legend-pitchfork").attr("height",100).attr("width",100);b.selectAll("rect").data(r).enter().append("rect").attr("x",s-10).attr("y",function(t,e){return 22+10*e}).attr("width",5).attr("height",8).style("fill",function(t){return m(t)}),b.selectAll("text").data(r).enter().append("text").attr("fill","rgba(255,255,255,0.5)").attr("text-anchor","start").attr("x",s-0).style("font-size",12).attr("id",function(t){return"History/Context"===t&&(t="History"),"Opinion/Interpretation"===t&&(t="Opinion"),"legend-".concat(t,"1")}).attr("y",function(t,e){return 30+10*e}).text(function(t){return t})},a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=Object(m.a)(f.a.mark(function t(){var e,a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("/api/comparingscore");case 3:return e=t.sent,t.next=6,e.json();case 6:a=t.sent,this.setState({data:a}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0);case 13:case"end":return t.stop()}},t,this,[[0,10]])}));return function(){return t.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.createBars(this.state.data)}},{key:"render",value:function(){var t=this;return r.a.createElement("div",{className:"pitchfork-chart",ref:function(e){return t.node=e},style:{paddingTop:"30vh",paddingBottom:"15vh"}})}}]),e}(n.Component),$=a(76),X=function(t){function e(){var t,a;Object(o.a)(this,e);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(t=Object(u.a)(e)).call.apply(t,[this].concat(r)))).state={songs:[],uploading:!1,songsData:[],playlist:[]},a.handleChange=function(t){a.setState({uploading:!0});var e=t.target.files[0],n=new FileReader;n.readAsDataURL(e),n.onload=function(t){var e={file:t.target.result};fetch("/api/upload",{method:"POST",body:JSON.stringify(e)}).then(function(t){return t.json()}).then(function(t){a.setState({songs:t})})}},a.handleSubmit=function(t){t.preventDefault()},a.handleClick=function(){var t=Object(m.a)(f.a.mark(function t(e){var n,r;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/playlist?idx=".concat(e));case 2:return n=t.sent,console.log("clicked",n),t.next=6,n.json();case 6:r=t.sent,a.setState({playlist:r});case 8:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),a}return Object(d.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=Object(m.a)(f.a.mark(function t(){var e,a;return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/songs");case 2:return e=t.sent,console.log("response",e),t.next=6,e.json();case 6:a=t.sent,this.setState({songsData:a});case 8:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"render",value:function(){var t=this;return r.a.createElement("div",null,r.a.createElement("h1",{style:{paddingTop:100}},"FinalProject"),r.a.createElement("audio",{ref:"audio_tag",src:"/music/test.mp3",controls:!0}),this.state.songs.map(function(t){var e=t.split("--\x3eARITST<--")[1].split("--\x3eSONG<--"),a=Object($.a)(e,2),n=a[0],c=a[1];return r.a.createElement("div",null,"Artist: ",n,", Song: ",c.replace("_H.png",""))}),r.a.createElement("div",null,this.state.playlist.length?r.a.createElement("div",null,r.a.createElement("h3",null,"PLAYLIST"),this.state.playlist.map(function(e,a){var n=e.split("--\x3eARITST<--")[1].split("--\x3eSONG<--"),c=Object($.a)(n,2),i=c[0],o=c[1];return r.a.createElement("div",{onClick:function(){return t.handleClick(a)}},"Artist: ",i,", Song: ",o.replace("_H.png",""))}),r.a.createElement("h3",null,"PLAYLIST")):r.a.createElement("div",null)),r.a.createElement("div",null,this.state.songsData.map(function(e,a){var n=e.split("--\x3eARITST<--")[1].split("--\x3eSONG<--"),c=Object($.a)(n,2),i=c[0],o=c[1];return r.a.createElement("div",{onClick:function(){return t.handleClick(a)}},"Artist: ",i,", Song: ",o.replace("_H.png",""))})))}}]),e}(n.Component),Z=a(328),tt=a(327),et=(n.Component,a(41)),at=function(t){function e(){return Object(o.a)(this,e),Object(s.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return r.a.createElement(x.a,null,r.a.createElement("div",{className:"App"},r.a.createElement(b,null),r.a.createElement("div",{id:"content"},r.a.createElement(et.a,{exact:!0,path:"/",component:w}),r.a.createElement(et.a,{exact:!0,path:"/predict",component:g}),r.a.createElement(et.a,{exact:!0,path:"/about",component:E}),r.a.createElement(et.a,{exact:!0,path:"/classification",component:q}),r.a.createElement(et.a,{exact:!0,path:"/pitchfork",component:W}),r.a.createElement(et.a,{exact:!0,path:"/finalProject",component:X}))))}}]),e}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(at,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(t){t.unregister()})},78:function(t,e){}},[[164,1,2]]]);
//# sourceMappingURL=main.15707bd2.chunk.js.map